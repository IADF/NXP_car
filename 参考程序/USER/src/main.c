
#include "headfile.h"
#include "MyBalance.h"
#include "My_I2C.h"
#include "Balance.h"
#include "System.h"
#include "led.h"
#include "loop.h"
#include "PID.h"
#include "ANO_Data_Transfer.h"
#include "show.h"
#include "control.h"

/******************************************************************************************************************
2018年全国大学生恩智浦杯智能车竞赛
成都信息工程大学   成信WD队
作者QQ：97354734

全国预赛第五  比赛的速度只有2.6 实验室最高速度2.8
直立环 速度环（40ms）->角度环（8ms）->角速度环（4ms） 
转向环 偏差环（8ms） ->角速度环（4ms）
两个环相加
内环应该越快越好 但同时也要考虑到芯片的运算能力
对陀螺仪芯片应该最好采用SPI读取的  例如ICM20602  但时间仓促  没来得及测试 只用了MPU6050
全部控制在loop.c在主循环中调用完成   定时器仅用来计系统时间 不会出现任务中断的情况
采用PID+ADRC控制
受限于KEA128的运算能力  只使用了TD环节对速度环的输出和速度的输出做了平滑处理 对坡道和颠簸时轮速产生的突变有消除作用 
环岛处理在EM.c中 采用阈值检测和有限状态机实现

作为代码的搬运工 移植了多种飞控的姿态及控制  分享才会有进步

*******************************************************************************************************************/
char Mode_Set = 6;	// 速度选择
int main(void)
{
	get_clk();              //获取时钟频率 必须执行
	System_Init(); 

	while (1)
	{	
		Loop_Run();
		//MOTOR_Control(-200,-200);

	}
}

